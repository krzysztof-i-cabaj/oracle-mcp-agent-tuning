# ü§ñ Autonomous Oracle DBA Agent (MCP + SQLcl Experiment)

> **Experiment:** Can AI autonomously diagnose, fix, and report performance issues in an Oracle Database?

This project demonstrates a true **Agentic Workflow**, where an AI model (Claude Haiku 4.5) is connected to an **Oracle Database 26ai** instance via the **Model Context Protocol (MCP)** and **SQLcl**.

The Agent was given full database access and a single high-level command: *"Find slow queries and fix them."* I did not manually write a single line of remedial SQL code.

---

## üìä Live Demo Results

The Agent autonomously generated the following reports as proof of work. These are hosted directly from this repository:

### üöÄ [VIEW FULL TECHNICAL REPORT (HTML)](https://krzysztof-i-cabaj.github.io/oracle-mcp-agent-tuning/optimization_report.html)
*Interactive dashboard with Chart.js visualizations showing "Before" and "After" analysis.*

### üìÑ [VIEW EXECUTIVE SUMMARY (HTML)](https://krzysztof-i-cabaj.github.io/oracle-mcp-agent-tuning/executive_summary.html)
*Business-ready version of the report, formatted for print/PDF export.*

---

## üìâ Key Agent Achievements

In a single 5-minute autonomous session, the Agent achieved the following:

| Issue Detected | Agent's Diagnosis | Solution Applied | CBO Cost Impact | Improvement |
| :--- | :--- | :--- | :--- | :--- |
| **Query 2** (VIP Join) | Missing FK indexes, Full Table Scan | Created index `IDX_DEMO_CUSTOMERS_SEGMENT` | 2,200 ‚ûî 414 | **-81.2%** üìâ |
| **Query 3** (Top-N Sort) | Expensive in-memory sorting (PGA) | Created index `IDX_ORDER_ITEMS_UNIT_PRICE_DESC` | 11,492 ‚ûî 3 | **-99.97%** üöÄ |

---

## üõ†Ô∏è Solution Architecture

This is not just "Text-to-SQL". It is a system where AI executes commands in a live runtime environment.

* **Database:** Oracle Database 26ai (Free Developer Release)
* **Interface:** VS Code + GitHub Copilot (acting as the MCP Client)
* **Tooling:** Oracle SQLcl (running with the `-mcp` flag)
* **Logic:** Autonomous Decision Loop (OODA: Observe, Orient, Decide, Act)

### Workflow:
1.  **Analyze:** Agent runs `EXPLAIN PLAN` for the provided workload.
2.  **Decide:** It detects `TABLE ACCESS FULL` operations and blocking functions in `WHERE` clauses.
3.  **Act:** It executes DDL (`CREATE INDEX...`) directly on the database.
4.  **Verify:** It re-runs tests to compare metrics.
5.  **Report:** It generates HTML/JSON files with the results.

---

## üìÇ Repository Structure

* `/docs` - HTML reports generated by the AI (publicly accessible via GitHub Pages).
* `/sql` - SQL scripts used for environment setup and workload simulation.
* `/metrics` - Raw CSV data containing performance metrics.

---

## üìû Contact / About

This project was created to test the limits of current LLMs in database engineering tasks.

https://www.linkedin.com/in/krzysztof-cabaj-16b6a52/
